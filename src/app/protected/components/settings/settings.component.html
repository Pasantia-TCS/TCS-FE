<div class="container">
  <app-header title="Configuración"></app-header>

  <!-- User Management -->
  <section class="py-3">
    <app-subtitle title="Administración de usuarios"></app-subtitle>
    <app-filter [data]="dataSource"></app-filter>

    <div class="mat-elevation-z8 table-container">
      <table mat-table [dataSource]="dataSource" aria-describedby="mydesc">

        <ng-container matColumnDef="id_ultimatix">
          <th mat-header-cell *matHeaderCellDef> Ultimatix</th>
          <td mat-cell *matCellDef="let element"> {{element.id_ultimatix}} </td>
        </ng-container>

        <ng-container matColumnDef="nombres_completos">
          <th mat-header-cell *matHeaderCellDef> Nombre</th>
          <td mat-cell *matCellDef="let element"> {{element.nombres_completos}} </td>
        </ng-container>

        <ng-container matColumnDef="rol">
          <th mat-header-cell *matHeaderCellDef> Rol</th>
          <td mat-cell *matCellDef="let element"> {{element.rol === 'admin' ? 'Administrador' : 'Usuario'}} </td>
        </ng-container>

        <ng-container matColumnDef="estado">
          <th mat-header-cell *matHeaderCellDef> Estado</th>
          <td mat-cell *matCellDef="let element"
              [ngStyle]="{color: element.estado ? 'var(--tcs-green)' : 'var(--tcs-red)'}">
            {{element.estado ? 'Desbloqueado' : 'Bloqueado'}}
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef> Acciones</th>
          <td mat-cell *matCellDef="let element">
            <button mat-icon-button data-bs-placement="right" title="Editar rol" style="cursor: pointer;"
                    (click)="changeRole(element.id_ultimatix!)">
              <mat-icon [ngStyle]="{'color': 'var(--tcs-pink)'}">edit</mat-icon>
            </button>
            <button mat-icon-button data-bs-placement="right" title="Bloquear/desbloquear usuario"
                    style="cursor: pointer;"
                    (click)="unlock(element.id_ultimatix!)">
              <mat-icon [ngStyle]="{'color': 'var(--tcs-pink)'}">lock_open</mat-icon>
            </button>
            <button mat-stroked-button color="primary" data-bs-placement="right" title="Mostrar token"
                    style="cursor: pointer;" (click)="token(element.id_ultimatix!)">Token
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">No hay datos que coincidan con el filtro</td>
        </tr>
      </table>
    </div>
  </section>

  <!-- Catalogs Management -->
  <section class="py-3">

    <app-subtitle title="Administración de catálogos"></app-subtitle>

    <h2>Lista de habilidades técnicas</h2>
    <app-filter [data]="skillsData"></app-filter>
    <button mat-raised-button color="primary" class="float-end" (click)="openAddSkill()">Agregar</button>
    <app-mat-icon-table [dataSource]="skillsData" [columns]="skillColumns" (clickEvent)="deleteSkill($event)">
    </app-mat-icon-table>

    <br>
    <h2>Lista de habilidades funcionales</h2>
    <app-filter [data]="skillsFunc"></app-filter>
    <button mat-raised-button color="primary" class="float-end" (click)="openAddSFunctionalSkill()">Agregar</button>
    <app-mat-icon-table [dataSource]="skillsFunc" [columns]="skillColumns" (clickEvent)="deleteSkillFunc($event)">
    </app-mat-icon-table>

    <br>
    <h2>Lista de aplicaciones</h2>
    <app-filter [data]="skillsApp"></app-filter>
    <button mat-raised-button color="primary" class="float-end" (click)="openAddApplications()">Agregar</button>
    <app-mat-icon-table [dataSource]="skillsApp" [columns]="appColumns" (clickEvent)="deleteSkillApp($event)">
    </app-mat-icon-table>

    <br>
    <h2>Lista de activos</h2>
    <app-filter [data]="assetsData"></app-filter>
    <button mat-raised-button color="primary" class="float-end" (click)="openAddAssetType()">Agregar</button>
    <app-mat-icon-table [dataSource]="assetsData" [columns]="assetColumns" (clickEvent)="deleteAsset($event)">
    </app-mat-icon-table>

    <br>
    <h2>Lista de áreas</h2>
    <app-filter [data]="areaData"></app-filter>
    <button mat-raised-button color="primary" class="float-end" (click)="openAddArea()">Agregar</button>
    <app-mat-icon-table [dataSource]="areaData" [columns]="areaColumns" (clickEvent)="deleteArea($event)">
    </app-mat-icon-table>

    <br>
    <h2>Lista de edificios</h2>
    <app-filter [data]="buildingData"></app-filter>
    <button mat-raised-button color="primary" class="float-end" (click)="openAddBuilding()">Agregar</button>
    <app-mat-icon-table [dataSource]="buildingData" [columns]="buildingColumns" (clickEvent)="deleteBuilding($event)">
    </app-mat-icon-table>
  </section>
</div>
